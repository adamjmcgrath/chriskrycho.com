<!DOCTYPE html>
<html lang="en">
<head>
    <title>Rust and Swift (vii) &middot; Chris Krycho</title>
    <meta name="description" content="I am reading through the Swift book, and comparing it to Rust, which I have also been learning over the past month. As with the other posts in this series, these are off-the-cuff impressions, which may be inaccurate in various ways. I’d be happy to hear feedback! Note, too ..."/>

    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1.0"/>

<link rel='me' href='https://alpha.app.net/chriskrycho' data-type='follow' data-user-id='@chriskrycho'/>    <meta property="og:url" content="http://www.chriskrycho.com/2015/rust-and-swift-vii.html"/>
    <meta property="og:title" content="Rust and Swift (vii)"/>
    <meta property="og:description" content="I am reading through the Swift book, and comparing it to Rust, which I have also been learning over the past month. As with the other posts in this series, these are off-the-cuff impressions, which may be inaccurate in various ways. I’d be happy to hear feedback! Note, too ..."/>
        <meta property="og:image" content="http://www.chriskrycho.com//assets/images/ck.png"/>
<link rel="author" href=""/>
<link rel="me" href=""/><meta name="twitter:card" content="summary"/>
<meta name="twitter:site" content="@chriskrycho"/>
<meta name="twitter:creator" content="@chriskrycho"/>
    <meta name="twitter:title" content="Rust and Swift (vii)"/>
    <meta name="twitter:description" content="I am reading through the Swift book, and comparing it to Rust, which I have also been learning over the past month. As with the other posts in this series, these are off-the-cuff impressions, which may be inaccurate in various ways. I’d be happy to hear feedback! Note, too ..."/>
        <meta name="twitter:image" content="http://www.chriskrycho.com/assets/images/ck.png"/>
    <link rel="me" href="https://medium.com/@chriskrycho"/>
    <link rel="me" href="https://twitter.com/chriskrycho"/>
    <link rel="me" href="https://www.facebook.com/chriskrycho"/>
    <link rel="me" href="http://stackoverflow.com/users/564181/chris-krycho"/>
    <link rel="me" href="https://app.net/chriskrycho"/>
    <link rel="me" href="http://instagram.com/chriskrycho"/>
    <link rel="me" href="http://www.linkedin.com/in/chriskrycho"/>
    <link rel="me" href="https://soundcloud.com/chriskrycho"/>
    <link rel="me" href="https://bitbucket.org/chriskrycho"/>
    <link rel="me" href="https://vimeo.com/chriskrycho"/>
    <link rel="me" href="https://github.com/chriskrycho"/>

    <link rel="openid.delegate" href="http://www.chriskrycho.com/" />
    <link rel="openid.server" href="https://indieauth.com/openid" />

    <link rel="stylesheet" type="text/css" href="http://www.chriskrycho.com/assets/style.css"/>
    <link rel="stylesheet" type="text/css" href="http://www.chriskrycho.com/assets/fonts.css"/>
    <link rel="stylesheet" type="text/css" href="http://www.chriskrycho.com/assets/icons.css"/>

    <link href="/favicon.png" type="image/png" rel="icon" />
    <link href="/favicon.ico" type="image/ico" rel="icon" />

    <script type="text/javascript" src="/assets/js/mtiFontTrackingCode.js"></script>

    <link rel="alternate" href="/feed.xml" type="application/rss+xml" title="All posts">
        <link rel="alternate" href="/feeds/art.xml" type="application/rss+xml" title="Posts filed in in 'Art''">
        <link rel="alternate" href="/feeds/blog.xml" type="application/rss+xml" title="Posts filed in in 'Blog''">
        <link rel="alternate" href="/feeds/micro.xml" type="application/rss+xml" title="Posts filed in in 'Micro''">
        <link rel="alternate" href="/feeds/talks.xml" type="application/rss+xml" title="Posts filed in in 'Talks''">
        <link rel="alternate" href="/feeds/tech.xml" type="application/rss+xml" title="Posts filed in in 'Tech''">
        <link rel="alternate" href="/feeds/theology.xml" type="application/rss+xml" title="Posts filed in in 'Theology''">
</head>
<body>
    <header id="site-header">
        <div class="hgroup">
            <h1 id="site-title">
<a href="http://www.chriskrycho.com"><img class="logotype" src="/assets/images/ck.png" alt="ck"/>Chris Krycho</a>
</h1>

            <h2 id="site-subtitle">Theology, technology, life & art</h2>
        </div>

        <nav>
            <ul>
                <li class="section-title"><a href="http://www.chriskrycho.com/about.html">About</a></li>
                <li class="section-title art"><a href="http://www.chriskrycho.com/art/">art</a></li>
                <li class="section-title blog"><a href="http://www.chriskrycho.com/blog/">blog</a></li>
                <li class="section-title talks"><a href="http://www.chriskrycho.com/talks/">talks</a></li>
                <li class="section-title tech"><a href="http://www.chriskrycho.com/tech/">tech</a></li>
                <li class="section-title theology"><a href="http://www.chriskrycho.com/theology/">theology</a></li>
            </ul>
        </nav>

    </header>


<article class="software-development listicles tech">

    <header>
<h1>Rust and Swift (vii)</h1>
<h2>Pattern matching and the value of expression blocks.</h2>    </header>

    <div class="meta"><span class="date"><a href="http://www.chriskrycho.com/2015/rust-and-swift-vii.html"><i class="fa fa-fw fa-link"></i></a>September 19, 2015 (updated September 20, 2015)</span><span class="section">Filed under <a class="section-title" href="http://www.chriskrycho.com/tech/">tech</a></span><span class="hashtag"><a class="hashtags" href="http://www.chriskrycho.com/software-development/">#software development</a><a class="hashtags" href="http://www.chriskrycho.com/listicles/">#listicles</a></span><span><a href="http://www.chriskrycho.com/2015/rust-and-swift-vii.txt">Markdown source</a></span></div>

    <div class="content-wrapper">


        <div class="content">

<p><i class="editorial">I am reading through the Swift book, and comparing it to Rust, which I have also been learning over the past month. As with the other posts in this series, these are off-the-cuff impressions, which may be inaccurate in various ways. I’d be happy to hear feedback! Note, too, that my preferences are just that: preferences. Your tastes may differ from mine.</i></p>
<section id="parts-in-the-series" class="level2">
<h2>Parts in the Series</h2>
<ol type="1">
<li><a href="/2015/rust-and-swift-i.html">Thoughts after reading the introduction to the Swift book.</a></li>
<li><a href="/2015/rust-and-swift-ii.html">Basic types and the syntax around them.</a></li>
<li><a href="/2015/rust-and-swift-iii.html">Operators, including overloading, and thoughts on brevity.</a></li>
<li><a href="/2015/rust-and-swift-iv.html">Language design tradeoffs, highlighted by string manipulation.</a></li>
<li><a href="/2015/rust-and-swift-v.html">The value (and challenge) of learning languages in parallel.</a></li>
<li><a href="/2015/rust-and-swift-vi.html">Collection types and the difference between syntax and semantics.</a></li>
<li>Pattern matching and the value of expression blocks.</li>
<li><a href="/2015/rust-and-swift-viii.html">Functions, closures, and an awful lot of Swift syntax.</a></li>
<li><a href="/2015/rust-and-swift-ix.html">Sum types (<code>enum</code>s) and more on pattern matching.</a></li>
<li><a href="/2015/rust-and-swift-x.html">Classes and structs (product types), and reference and value types.</a></li>
<li><a href="/2016/rust-and-swift-xi.html">Hopes for the next generation of systems programming.</a></li>
</ol>
<hr />
<ul>
<li><p>Both Rust and Swift have <em>pattern-matching</em>, and with what appears to be fairly similar basic behavior. (I touched on this briefly in my <a href="/2015/rust-and-swift-i.html">first post in the series</a>.) In Rust this goes under the <code>match</code> construct, with matches specified like <code>&lt;pattern&gt; =&gt; &lt;expression|statement&gt;</code>, optionally with guards specified with <code>if</code> expressions. In Swift, patterns are matched using the <code>switch</code> construct, with matches specified like <code>case &lt;pattern&gt;: &lt;expression|statement&gt;</code>, optionally with guards specified with <code>where</code> expressions. (<code>where</code> is also used in Rust, but for generic constraints, not pattern match guards.)</p></li>
<li><p>Both languages allow you to bind names to a matched pattern: Swift with <code>case let &lt;name&gt;</code> and Rust simply by using the name in a normal destructuring expression as part of the match definition.</p>
<p><strong>Edit:</strong> that’s not <em>quite</em> right. In Rust, you use the <code>@</code> operator with the variable name you want to bind in the match.</p>
<p><strong>Edit the second:</strong> I was mixed up, because Rust actually has <em>both</em> of those options. You can either match directly, e.g. when getting the value of an <code>Option</code> type: <code>Some(value)</code> as the pattern will bind <code>value</code>. But if you need to bind a specific part of more complicated data structure, the <code>@</code> operator is present to let you do it in a fairly straightforward way.</p></li>
<li><p>Both languages allow for the use of <code>_</code> as a “wildcard” in match definitions. Since match definitions in Rust use the patterns directly, the equivalent of Swift’s C-like <code>default</code> is simply a wildcard match pattern (<code>_ =&gt; &lt;-expression|statement&gt;</code>).</p></li>
<li><p>One significant difference: like its <code>if</code> blocks, Rust’s <code>match</code> blocks are expressions, so they can be assigned. I.e., you can write this:</p>
<pre class="rust"><code>let test = 5u32;
let description = match test {
    0..10 =&gt; &quot;less than ten&quot;,
        _ =&gt; &quot;greater than ten&quot;,
}
println!(&quot;{?:}&quot;);  // &quot;less than ten&quot;</code></pre>
<p>Swift doesn’t let you do this; the same thing there would be written like this:</p>
<pre class="swift"><code>let test: UInt32 = 5
var description: String
switch test {
    case 0..&lt;10:
        description = &quot;less than ten&quot;
    default:
        description = &quot;greater than ten&quot;
}
println(&quot;\(description)&quot;)</code></pre></li>
<li><p>Both languages have <code>break</code> statements, but in Rust they’re only used in loop constructs, while Swift (like C) uses them to escape <code>case</code>s as well. The Swift book gives an example of one place they’re necessary in a <code>switch</code>: to match a case and do nothing there (e.g. <code>default: break</code>). In Rust, you would simply supply an empty block for that scenario (e.g. <code>_ =&gt; {}</code>).</p></li>
<li><p>Correctly, both languages force you to match exhaustively on relevant patterns. If you’re matching an enumerated type, for example, you must handle every enumerated value. You can of course do this with wildcard patterns or with Swift’s <code>default</code>, but the good thing is that both languages will refuse even to compile if a given pattern isn’t matched.</p></li>
<li><p>Swift’s default behavior around its <code>switch</code> statements is sane: it does <em>not</em> automatically fall through into the next statement. It does let you do this, without checking the condition on the next statement (as in C), using the <code>fallthrough</code> keyword. Rust, by contrast, simply doesn’t allow this at all.</p></li>
<li><p>Both languages supply named control statements (loops, etc.), with slightly different syntax for naming them. Rust’s, curiously, shares its syntax with lifetime definitions—more on those in a future post.</p></li>
<li><p>I don’t believe Rust has anything quite like Swift’s <code>guard</code>s, which allow you to leave normal or expected control flow in the main body of a block, with a secondary block for cases where the <code>guard</code> isn’t matched. This isn’t a huge deal, but it does fit as a nice convenience into the typical <code>if let</code> pattern in Swift. Basically, it just lets you elide an empty <code>if</code> block and supply only the <code>else</code> block.</p>
<p><strong>Edit:</strong> a friend <a href="https://alpha.app.net/jws/post/64804111">points out</a> that Swift <code>guard</code>s also require you to exit the current scope, so it’s unambiguous what you’re doing if you use them.</p></li>
</ul>
<hr />
<ul>
<li><a href="/2015/rust-and-swift-vi.html">Previous: Collection types and the difference between syntax and semantics.</a></li>
<li><a href="/2015/rust-and-swift-viii.html">Next: Functions, closures, and an awful lot of Swift syntax.</a></li>
</ul>
<div id="refs" class="references">

</div>
</section>
        </div>
    </div>
</article>


    <footer id="site-footer"><section id="connect">
    <h2>Connect</h2>
    <ul class="icons">
        <li><a href="https://twitter.com/chriskrycho"><i class="fa fa-fw fa-twitter"></i>Twitter</a></li>
        <li><a href="https://github.com/chriskrycho"><i class="fa fa-fw fa-github"></i>GitHub</a></li>
        <li><a href="https://app.net/chriskrycho"><i class="fa fa-fw fa-adn"></i>App.net</a></li>
        <li><a href="https://soundcloud.com/chriskrycho"><i class="fa fa-fw fa-cloud"></i>SoundCloud</a></li>
        <li><a href="http://instagram.com/chriskrycho"><i class="fa fa-fw fa-instagram"></i>Instagram</a></li>
        <li><a href="http://www.linkedin.com/in/chriskrycho"><i class="fa fa-fw fa-linkedin"></i>LinkedIn</a></li>
        <li><a href="https://vimeo.com/chriskrycho"><i class="fa fa-fw fa-vimeo"></i>Vimeo</a></li>
        <li><a href="http://stackoverflow.com/users/564181/chris-krycho"><i class="fa fa-fw fa-stack-overflow"></i>Stack Overflow</a></li>
    </ul>
</section>
<section id="subscribe">
    <h2>Subscribe</h2>
    <ul class="icons">
        <li class="section-title">
            <a href="http://www.chriskrycho.com/feed.xml"><i class="fa fa-fw fa-rss"></i>Everything</a>
        </li>
        <li class="section-title">
            <a href="http://www.chriskrycho.com/feeds/art.xml"><i class="fa fa-fw fa-rss"></i>art</a>
        </li>
        <li class="section-title">
            <a href="http://www.chriskrycho.com/feeds/blog.xml"><i class="fa fa-fw fa-rss"></i>blog</a>
        </li>
        <li class="section-title">
            <a href="http://www.chriskrycho.com/feeds/micro.xml"><i class="fa fa-fw fa-rss"></i>micro</a>
        </li>
        <li class="section-title">
            <a href="http://www.chriskrycho.com/feeds/talks.xml"><i class="fa fa-fw fa-rss"></i>talks</a>
        </li>
        <li class="section-title">
            <a href="http://www.chriskrycho.com/feeds/tech.xml"><i class="fa fa-fw fa-rss"></i>tech</a>
        </li>
        <li class="section-title">
            <a href="http://www.chriskrycho.com/feeds/theology.xml"><i class="fa fa-fw fa-rss"></i>theology</a>
        </li>
    </ul>
</section>
<section id="recent">
    <h2>Recent</h2>
    <ul>
        <li>Art: <a href="http://www.chriskrycho.com/2015/fall-haiku.html">Fall Haiku</a></li>
        <li>Blog: <a href="http://www.chriskrycho.com/2016/trust-fame-and-deceit.html">Trust, Fame, and Deceit</a></li>
        <li>Talks: <a href="http://www.chriskrycho.com/2015/tolle-lege.html">Tolle Lege!</a></li>
        <li>Tech: <a href="http://www.chriskrycho.com/2016/i-dont-know-when-id-use-that.html">I Don't Know When I'd Use That</a></li>
        <li>Theology: <a href="http://www.chriskrycho.com/2015/power-and-mercy.html">Power and Mercy</a></li>
    </ul>
</section></footer>

    <script async src="http://code.bib.ly/bibly.min.js"></script>
    <link href="http://code.bib.ly/bibly.min.css" rel="stylesheet" />
    <script type="text/javascript">
    var MTIProjectId='a34d2e31-99b5-469a-9b81-128fc0bd9745';
    </script>

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.0.0/styles/tomorrow.min.css">
<script src="/assets/js/highlight.pack.js"></script>
<script type="text/javascript">
// Get all the <pre><code> elements, and use the <pre> element to set the <code>
// element's class so hljs will use it rather than trying to figure it out.
var preEls = document.getElementsByTagName('pre');
for (var e in preEls) {
    var pre = preEls[e];
    if (pre.firstChild && pre.firstChild.tagName === 'CODE') {
        var code = pre.firstChild;
        code.className = pre.className;
    }
}

// Then run hljs.
hljs.initHighlightingOnLoad();
</script>

<script type="text/javascript" src="/assets/js/spacewell.js"></script>
<script type="text/javascript">
var articles = document.getElementsByTagName('article');
var options = {'emDashes': true, 'enDashes': true};
for (var a in articles) {
  if (articles.hasOwnProperty(a)) { spacewell(articles[a], options); }
}
</script>
</body>
</html>